<div class="grid md:grid-cols-3 gap-6">
  <!-- Left: Numbers + AI prompt -->
  <div class="md:col-span-2 space-y-6">
    <!-- Paste numbers -->
    <div class="bg-slate-800 rounded-2xl p-5 border border-slate-700">
      <h2 class="text-lg font-semibold mb-2">Upload phone numbers</h2>
      <p class="text-xs text-slate-400 mb-3">Paste up to 100 Indian / 1800 numbers, one per line. Use Twilio test numbers while testing.</p>

      <%= form_with url: dialer_upload_numbers_path, method: :post, local: true do |f| %>
        <%= f.text_area :numbers_text,
          rows: 6,
          class: "w-full rounded-xl bg-slate-900 border border-slate-700 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500",
          placeholder: "18001234567\n18007654321" %>

        <div class="mt-3">
          <button class="px-4 py-2 rounded-xl bg-emerald-500 text-sm font-semibold text-slate-900 hover:bg-emerald-400">
            Save Numbers
          </button>
        </div>
      <% end %>
    </div>

    <!-- Start autodial -->
    <div class="bg-slate-800 rounded-2xl p-5 border border-slate-700">
      <h2 class="text-lg font-semibold mb-2">Start Autodial</h2>
      <p class="text-xs text-slate-400 mb-3">This will call all saved contacts sequentially using Twilio (use safe test numbers).</p>

      <%= form_with url: dialer_start_autodial_path, method: :post, local: true do |f| %>
        <label class="block text-xs text-slate-300 mb-1">Message for AI voice (TTS)</label>
        <%= f.text_field :call_message,
          class: "w-full rounded-xl bg-slate-900 border border-slate-700 px-3 py-2 text-sm mb-3",
          placeholder: "Hello, this is a test call from Autodialer." %>

        <button class="px-4 py-2 rounded-xl bg-emerald-500 text-sm font-semibold text-slate-900 hover:bg-emerald-400">
          Start Autodial
        </button>
      <% end %>
    </div>

    <!-- AI prompt for single tasks -->
    <div class="bg-slate-800 rounded-2xl p-5 border border-slate-700">
      <h2 class="text-lg font-semibold mb-2">AI Call Prompt</h2>
      <p class="text-xs text-slate-400 mb-3">
        Type something like: <span class="italic">"make a call to 18001234567 saying this is a demo"</span>.
        The AI will extract numbers & message.
      </p>

      <%= form_with url: dialer_ai_prompt_path, method: :post, local: true do |f| %>
        <%= f.text_area :ai_prompt,
          rows: 3,
          class: "w-full rounded-xl bg-slate-900 border border-slate-700 px-3 py-2 text-sm mb-3",
          placeholder: "make a call to 18001234567 saying this is a demo from my Rails autodialer" %>

        <button class="px-4 py-2 rounded-xl bg-indigo-500 text-sm font-semibold text-slate-50 hover:bg-indigo-400">
          Run AI Prompt
        </button>
      <% end %>
    </div>
  </div>

  <!-- Right: stats & recent contacts -->
  <div class="space-y-6">
    <div class="bg-slate-800 rounded-2xl p-5 border border-slate-700">
      <h2 class="text-lg font-semibold mb-4">Stats</h2>
      <div class="space-y-2 text-sm">
        <div class="flex justify-between">
          <span>Total contacts</span>
          <span class="font-semibold"><%= @stats[:total_contacts] %></span>
        </div>
        <div class="flex justify-between">
          <span>Total calls</span>
          <span class="font-semibold"><%= @stats[:total_calls] %></span>
        </div>
        <div class="flex justify-between text-emerald-400">
          <span>Answered (completed)</span>
          <span class="font-semibold"><%= @stats[:answered] %></span>
        </div>
        <div class="flex justify-between text-rose-400">
          <span>Failed</span>
          <span class="font-semibold"><%= @stats[:failed] %></span>
        </div>
      </div>
    </div>

    <div class="bg-slate-800 rounded-2xl p-5 border border-slate-700">
      <h2 class="text-lg font-semibold mb-3">Recent Contacts</h2>
      <ul class="space-y-1 text-xs">
        <% @contacts.each do |c| %>
          <li class="flex justify-between border-b border-slate-700/40 pb-1">
            <span><%= c.phone_number %></span>
            <span class="text-slate-400"><%= c.status || "new" %></span>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
